#!/bin/bash

cd "$(cd $(dirname $0)/..; pwd)"
git restore sigenergy2mqtt/config/version.py

echo -e "${GREEN}>>> Checking dependencies...${NC}"
scripts/dependencies

. $(dirname $0)/build

read -p "Confirm version bump? (y/n): " confirm
if [[ "$confirm" != "y" ]]; then
    echo "Version bump cancelled."
    exit 1
fi

echo "Bumping version..."
git add sigenergy2mqtt/config/version.py
git commit -m "Bump version to $new_version"
git tag "$new_version"
git push && git push --tags
